# Demo 4: Mode Schedule × Exchange Regime
#
# Pedagogical Goal: "Time Constraints with Money"
#
# This scenario demonstrates the two-layer control architecture: mode_schedule
# controls WHEN agents can trade (temporal control), while exchange_regime 
# controls WHAT types of trades are allowed (type control). Agents alternate
# between foraging and trading periods, creating realistic time constraints.
#
# Key Teaching Points:
# - Separation of temporal and type control
# - Mode schedule cycles (forage → trade → forage...)
# - How time constraints affect trade patterns
# - Mode × regime interaction (Phase 3 feature)
# - Visual mode indicators (press 'I' to see overlay)
#
# Suggested Exercise:
# 1. Watch mode transitions in top-left overlay (press 'I')
# 2. Observe that trades only occur during "trade" mode
# 3. Note how agents accumulate resources during forage mode
# 4. Use scripts/plot_mode_timeline.py to visualize mode schedule

schema_version: 1
name: "Demo 4: Mode Schedule × Exchange Regime"
N: 18
agents: 12

mode_schedule:
  type: global_cycle
  forage_ticks: 15
  trade_ticks: 20
  start_mode: forage

initial_inventories:
  A: [8, 3, 0, 10, 5, 0, 7, 2, 9, 0, 6, 4]
  B: [0, 7, 10, 0, 4, 9, 2, 8, 0, 10, 3, 5]
  M: [120, 120, 120, 120, 120, 120, 120, 120, 120, 120, 120, 120]

utilities:
  mix:
    - type: ces
      weight: 1.0
      params:
        rho: 0.4
        wA: 0.55
        wB: 0.45

params:
  spread: 0.08
  vision_radius: 18
  interaction_radius: 1
  move_budget_per_tick: 2
  dA_max: 3
  forage_rate: 2
  
  # Mixed regime with mode schedule
  exchange_regime: mixed
  money_mode: quasilinear
  money_scale: 1
  lambda_money: 1.0

resource_seed:
  density: 0.3
  amount: 5

# Recommended: Run for 100+ ticks to see multiple mode cycles

